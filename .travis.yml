language: python

cache: pip

python:
  - "3.6"
  - "3.6-dev"
  - "3.7-dev"

services:
  - postgresql
  - redis-server

install:
  - pip install -r requirements.txt

script:
  - flake8
  - ./manage.py migrate  # test forward migrations
  - pytest

matrix:
  allow_failures:
    - python: "3.7-dev"